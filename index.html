<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>VibrantShop - Your Ultimate Online Store</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap');
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0;
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(135deg, #ff6e7f 0%, #bfe9ff 100%);
    color: #333;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }
  header {
    background: #ff4b5c;
    color: white;
    padding: 40px 20px 60px 20px;
    text-align: center;
    position: relative;
    overflow: hidden;
  }
  header h1 {
    font-size: 3rem;
    margin: 0 0 10px 0;
    font-weight: 700;
    text-shadow: 2px 2px 8px rgba(0,0,0,0.2);
  }
  header p {
    font-size: 1.3rem;
    font-weight: 500;
    margin: 0 0 30px 0;
    text-shadow: 1px 1px 6px rgba(0,0,0,0.15);
  }
  #shop-now-btn {
    background: #fff;
    color: #ff4b5c;
    padding: 15px 40px;
    font-size: 1.25rem;
    font-weight: 700;
    border: none;
    border-radius: 40px;
    cursor: pointer;
    box-shadow: 0 8px 15px rgba(255,75,92,0.4);
    transition: all 0.3s ease;
    filter: drop-shadow(0 3px 4px rgba(0,0,0,0.15));
  }
  #shop-now-btn:hover {
    background: #ff6e7f;
    color: white;
    box-shadow: 0 12px 25px rgba(255,75,92,0.7);
    transform: translateY(-4px);
  }

  main {
    flex-grow: 1;
    max-width: 1200px;
    margin: -100px auto 60px auto;
    padding: 0 20px 80px 20px;
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(270px,1fr));
    gap: 30px;
    z-index: 1;
    position: relative;
  }

  .product-card {
    background: white;
    border-radius: 20px;
    box-shadow: 0 20px 30px rgba(0,0,0,0.1);
    overflow: hidden;
    display: flex;
    flex-direction: column;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    cursor: pointer;
  }
  .product-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 30px 45px rgba(255,75,92,0.3);
  }
  .product-image {
    width: 100%;
    height: 200px;
    object-fit: cover;
    border-bottom: 8px solid #ff4b5c;
    transition: transform 0.3s ease;
  }
  .product-card:hover .product-image {
    transform: scale(1.05);
  }
  .product-content {
    padding: 20px;
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }
  .product-title {
    font-size: 1.2rem;
    font-weight: 700;
    margin: 0 0 10px 0;
    color: #333;
  }
  .product-desc {
    font-size: 0.9rem;
    color: #666;
    flex-grow: 1;
    margin-bottom: 15px;
  }
  .product-price {
    font-size: 1.1rem;
    font-weight: 600;
    color: #ff4b5c;
    margin-bottom: 15px;
  }
  .add-to-cart-btn {
    background: #ff4b5c;
    color: white;
    border: none;
    padding: 12px 0;
    border-radius: 30px;
    font-weight: 700;
    font-size: 1rem;
    cursor: pointer;
    box-shadow: 0 8px 16px rgba(255,75,92,0.35);
    transition: background-color 0.3s ease;
    user-select: none;
  }
  .add-to-cart-btn:hover {
    background: #ff6e7f;
  }

  /* Cart Panel */
  #cart-panel {
    position: fixed;
    top: 0;
    right: 0;
    width: 350px;
    max-width: 100vw;
    height: 100vh;
    background: #fff;
    box-shadow: -10px 0 30px rgba(0,0,0,0.25);
    transform: translateX(100%);
    transition: transform 0.35s cubic-bezier(0.4,0,0,1);
    display: flex;
    flex-direction: column;
    z-index: 9999;
  }
  #cart-panel.open {
    transform: translateX(0);
  }
  #cart-header {
    background: #ff4b5c;
    color: white;
    padding: 25px 20px;
    font-weight: 700;
    font-size: 1.4rem;
    text-align: center;
    position: relative;
  }
  #close-cart-btn {
    position: absolute;
    top: 20px;
    right: 20px;
    background: transparent;
    border: none;
    color: white;
    font-size: 1.8rem;
    cursor: pointer;
    font-weight: 700;
  }
  #cart-items {
    flex-grow: 1;
    overflow-y: auto;
    padding: 15px 20px;
  }
  .cart-item {
    display: flex;
    align-items: center;
    margin-bottom: 15px;
    border-bottom: 1px solid #eee;
    padding-bottom: 12px;
  }
  .cart-item img {
    width: 70px;
    height: 70px;
    border-radius: 12px;
    object-fit: cover;
    margin-right: 15px;
    box-shadow: 0 3px 8px rgba(0,0,0,0.12);
  }
  .cart-item-info {
    flex-grow: 1;
  }
  .cart-item-title {
    font-weight: 600;
    font-size: 1rem;
    margin: 0 0 5px 0;
    color: #ff4b5c;
  }
  .cart-item-price {
    font-weight: 500;
    font-size: 0.9rem;
    color: #777;
    margin-bottom: 5px;
  }
  .cart-item-qty {
    display: flex;
    align-items: center;
  }
  .qty-btn {
    background: #ff4b5c;
    color: white;
    border: none;
    width: 28px;
    height: 28px;
    border-radius: 6px;
    font-size: 1.2rem;
    font-weight: 700;
    line-height: 1;
    cursor: pointer;
    margin: 0 8px;
    user-select: none;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: background 0.25s ease;
  }
  .qty-btn:hover {
    background: #ff6e7f;
  }
  #cart-footer {
    padding: 20px;
    border-top: 1px solid #eee;
  }
  #cart-total {
    font-weight: 700;
    font-size: 1.2rem;
    text-align: right;
    color: #ff4b5c;
    margin-bottom: 15px;
  }
  #checkout-btn {
    background: #ff4b5c;
    padding: 15px;
    width: 100%;
    border: none;
    border-radius: 40px;
    font-size: 1.2rem;
    font-weight: 700;
    color: white;
    cursor: pointer;
    box-shadow: 0 8px 16px rgba(255,75,92,0.4);
    transition: background-color 0.3s ease;
  }
  #checkout-btn:hover {
    background: #ff6e7f;
  }

  /* Floating Cart Button */
  #cart-toggle-btn {
    position: fixed;
    bottom: 30px;
    right: 30px;
    background: #ff4b5c;
    width: 60px;
    height: 60px;
    border: none;
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 8px 25px rgba(255,75,92,0.5);
    display: flex;
    justify-content: center;
    align-items: center;
    color: white;
    font-size: 1.8rem;
    font-weight: 700;
    transition: background-color 0.3s ease;
    user-select: none;
  }
  #cart-toggle-btn:hover {
    background: #ff6e7f;
  }

  #cart-count-badge {
    position: absolute;
    top: -4px;
    right: -4px;
    background: #03dac6;
    color: #111;
    font-weight: 700;
    font-size: 0.8rem;
    border-radius: 12px;
    padding: 2px 7px;
    min-width: 20px;
    text-align: center;
    box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    user-select: none;
  }

  /* Scrollbar Styling */
  #cart-items::-webkit-scrollbar {
    width: 8px;
  }
  #cart-items::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 4px;
  }
  #cart-items::-webkit-scrollbar-thumb {
    background: #ff4b5c;
    border-radius: 4px;
  }

  footer {
    text-align: center;
    font-weight: 500;
    padding: 15px 10px 20px 10px;
    background-color: #ff4b5c;
    color: white;
    font-size: 0.85rem;
    user-select: none;
  }

  @media (max-width: 480px) {
    header h1 {
      font-size: 2.25rem;
    }
    header p {
      font-size: 1.1rem;
    }
    #shop-now-btn {
      padding: 12px 30px;
      font-size: 1.1rem;
    }
    main {
      margin: -70px auto 60px auto;
      gap: 18px;
      grid-template-columns: repeat(auto-fit,minmax(220px,1fr));
      padding-bottom: 100px;
    }
    #cart-panel {
      width: 100vw;
    }
  }
</style>
</head>
<body>

<header>
  <h1>VibrantShop</h1>
  <p>Your Ultimate Online Store - Shop with Joy & Style</p>
  <button id="shop-now-btn" aria-label="Scroll to product listings">Shop Now</button>
</header>

<main aria-label="Product listings" id="product-list">
  <!-- Products loaded dynamically -->
</main>

<!-- Floating Cart Toggle Button -->
<button id="cart-toggle-btn" aria-label="Toggle shopping cart" aria-haspopup="true" aria-expanded="false" aria-controls="cart-panel">
  ðŸ›’
  <div id="cart-count-badge" aria-live="polite" aria-atomic="true">0</div>
</button>

<!-- Cart Panel -->
<aside id="cart-panel" aria-label="Shopping cart" role="region" aria-live="polite" aria-atomic="true">
  <header id="cart-header">
    Your Cart
    <button id="close-cart-btn" aria-label="Close shopping cart">&times;</button>
  </header>
  <div id="cart-items" tabindex="0">
    <!-- Added cart items -->
  </div>
  <footer id="cart-footer">
    <div id="cart-total" aria-live="polite" aria-atomic="true">Total: $0.00</div>
    <button id="checkout-btn" aria-label="Proceed to checkout">Checkout</button>
  </footer>
</aside>

<footer>
  &copy; 2024 VibrantShop. All rights reserved.
</footer>

<script>
  // Sample products data array
  const products = [
    {
      id: 1,
      title: "Sleek Wireless Headphones",
      description: "Experience crystal-clear sound with noise cancellation technology.",
      price: 99.99,
      image: "https://images.unsplash.com/photo-1512314889357-e157c22f938d?auto=format&fit=crop&w=600&q=80"
    },
    {
      id: 2,
      title: "Modern Leather Backpack",
      description: "Stylish and spacious backpack for work or travel.",
      price: 79.95,
      image: "https://images.unsplash.com/photo-1542838687-0feccf9fddf8?auto=format&fit=crop&w=600&q=80"
    },
    {
      id: 3,
      title: "Smart Fitness Tracker",
      description: "Monitor your activity and health on the go.",
      price: 49.50,
      image: "https://images.unsplash.com/photo-1556404910-0a11d25bc6a9?auto=format&fit=crop&w=600&q=80"
    },
    {
      id: 4,
      title: "Elegant Analog Watch",
      description: "Timeless design with durable stainless steel band.",
      price: 149.99,
      image: "https://images.unsplash.com/photo-1515548215666-1107f13f3c32?auto=format&fit=crop&w=600&q=80"
    },
    {
      id: 5,
      title: "Cozy Woolen Scarf",
      description: "Keep warm and look great with this handwoven scarf.",
      price: 35.00,
      image: "https://images.unsplash.com/photo-1512436991641-6745cdb1723f?auto=format&fit=crop&w=600&q=80"
    },
    {
      id: 6,
      title: "Portable Bluetooth Speaker",
      description: "Take great sound with you anywhere you go.",
      price: 59.49,
      image: "https://images.unsplash.com/photo-1532634726-2a287e620f62?auto=format&fit=crop&w=600&q=80"
    }
  ];

  // DOM elements references
  const productList = document.getElementById('product-list');
  const cartToggleBtn = document.getElementById('cart-toggle-btn');
  const cartPanel = document.getElementById('cart-panel');
  const closeCartBtn = document.getElementById('close-cart-btn');
  const cartItemsContainer = document.getElementById('cart-items');
  const cartCountBadge = document.getElementById('cart-count-badge');
  const cartTotal = document.getElementById('cart-total');
  const checkoutBtn = document.getElementById('checkout-btn');
  const shopNowBtn = document.getElementById('shop-now-btn');

  let cart = {};

  // Helper: format number as price
  function formatPrice(num) {
    return `$${num.toFixed(2)}`;
  }

  // Load cart from localStorage
  function loadCart() {
    const stored = localStorage.getItem('vibrantShopCart');
    if (stored) {
      try {
        cart = JSON.parse(stored);
      } catch {
        cart = {};
      }
    }
  }

  // Save cart to localStorage
  function saveCart() {
    localStorage.setItem('vibrantShopCart', JSON.stringify(cart));
  }

  // Render product cards
  function renderProducts() {
    productList.innerHTML = "";
    products.forEach(product => {
      const card = document.createElement('article');
      card.className = 'product-card';
      card.tabIndex = 0;
      card.setAttribute('aria-label', `Product: ${product.title}. Price: ${formatPrice(product.price)}.`);

      card.innerHTML = `
        <img src="${product.image}" alt="${product.title}" class="product-image" loading="lazy" />
        <div class="product-content">
          <h3 class="product-title">${product.title}</h3>
          <p class="product-desc">${product.description}</p>
          <div class="product-price">${formatPrice(product.price)}</div>
          <button class="add-to-cart-btn" aria-label="Add ${product.title} to cart" data-product-id="${product.id}">Add to Cart</button>
        </div>
      `;
      productList.appendChild(card);
    });
  }

  // Render cart items
  function renderCart() {
    cartItemsContainer.innerHTML = "";
    const keys = Object.keys(cart);
    if(keys.length === 0){
      cartItemsContainer.innerHTML = '<p style="text-align:center;color:#999;margin-top:20px;">Your cart is empty.</p>';
      cartCountBadge.textContent = '0';
      cartCountBadge.setAttribute('aria-label', 'Cart is empty');
      cartTotal.textContent = 'Total: $0.00';
      checkoutBtn.disabled = true;
      checkoutBtn.style.cursor = 'not-allowed';
      return;
    }
    checkoutBtn.disabled = false;
    checkoutBtn.style.cursor = 'pointer';

    let total = 0;
    let totalCount = 0;

    keys.forEach(productId => {
      const item = cart[productId];
      const product = products.find(p => p.id == productId);
      if (!product) return;

      total += product.price * item.quantity;
      totalCount += item.quantity;

      const itemDiv = document.createElement('div');
      itemDiv.className = 'cart-item';
      itemDiv.setAttribute('role', 'listitem');

      itemDiv.innerHTML = `
        <img src="${product.image}" alt="${product.title}" loading="lazy" />
        <div class="cart-item-info">
          <h4 class="cart-item-title">${product.title}</h4>
          <div class="cart-item-price">${formatPrice(product.price)} x ${item.quantity} = ${formatPrice(product.price * item.quantity)}</div>
          <div class="cart-item-qty" aria-label="Quantity controls for ${product.title}">
            <button class="qty-btn" aria-label="Decrease quantity" data-action="decrease" data-id="${productId}">âˆ’</button>
            <span aria-live="polite" aria-atomic="true" style="min-width: 24px;display:inline-block;text-align:center;">${item.quantity}</span>
            <button class="qty-btn" aria-label="Increase quantity" data-action="increase" data-id="${productId}">+</button>
          </div>
        </div>
      `;

      cartItemsContainer.appendChild(itemDiv);
    });

    cartCountBadge.textContent = totalCount;
    cartCountBadge.setAttribute('aria-label', `${totalCount} items in cart`);
    cartTotal.textContent = `Total: ${formatPrice(total)}`;
  }

  // Add product to cart
  function addToCart(id) {
    if(cart[id]) {
      cart[id].quantity++;
    } else {
      cart[id] = { quantity: 1 };
    }
    saveCart();
    renderCart();
    animateCartButton();
  }

  // Change quantity for a cart item
  function changeQuantity(id, delta) {
    if(!cart[id]) return;
    cart[id].quantity += delta;
    if(cart[id].quantity <= 0) {
      delete cart[id];
    }
    saveCart();
    renderCart();
  }

  // Animate cart button on adding an item
  function animateCartButton() {
    cartToggleBtn.animate(
      [
        { transform: 'scale(1)', boxShadow: '0 8px 25px rgba(255,75,92,0.5)' },
        { transform: 'scale(1.2)', boxShadow: '0 15px 40px rgba(255,75,92,0.9)' },
        { transform: 'scale(1)', boxShadow: '0 8px 25px rgba(255,75,92,0.5)' },
      ],
      {
        duration: 300,
        easing: 'ease-in-out'
      }
    );
  }

  // Toggle cart panel
  function toggleCartPanel(open) {
    if(open === undefined) {
      open = !cartPanel.classList.contains('open');
    }
    if(open) {
      cartPanel.classList.add('open');
      cartToggleBtn.setAttribute('aria-expanded', 'true');
      cartPanel.focus();
    } else {
      cartPanel.classList.remove('open');
      cartToggleBtn.setAttribute('aria-expanded', 'false');
      cartToggleBtn.focus();
    }
  }

  // Event delegation for add to cart buttons
  productList.addEventListener('click', e => {
    if(e.target.classList.contains('add-to-cart-btn')) {
      const productId = e.target.getAttribute('data-product-id');
      addToCart(productId);
    }
  });

  // Event delegation for cart quantity buttons
  cartItemsContainer.addEventListener('click', e => {
    if(e.target.classList.contains('qty-btn')) {
      const action = e.target.getAttribute('data-action');
      const id = e.target.getAttribute('data-id');
      if(action === 'increase') {
        changeQuantity(id, +1);
      } else if(action === 'decrease') {
        changeQuantity(id, -1);
      }
    }
  });

  // Toggle cart on button click
  cartToggleBtn.addEventListener('click', () => {
    toggleCartPanel();
  });

  // Close cart panel button
  closeCartBtn.addEventListener('click', () => {
    toggleCartPanel(false);
  });

  // Clicking outside cart closes it (on smaller screens)
  window.addEventListener('click', event => {
    if(cartPanel.classList.contains('open') && !cartPanel.contains(event.target) && !cartToggleBtn.contains(event.target)){
      toggleCartPanel(false);
    }
  });

  // Checkout button click
  checkoutBtn.addEventListener('click', () => {
    if(Object.keys(cart).length === 0) {
      alert("Your cart is empty! Please add some products before checkout.");
      return;
    }
    alert("Thank you for your purchase! This is a demo site.");
    cart = {};
    saveCart();
    renderCart();
    toggleCartPanel(false);
  });

  // Scroll to products on Shop Now click
  shopNowBtn.addEventListener('click', () => {
    productList.scrollIntoView({ behavior: 'smooth' });
  });

  // Initialize app: load cart, render UI
  function init() {
    loadCart();
    renderProducts();
    renderCart();
  }

  window.addEventListener('load', init);
</script>

</body>
</html>
